@{
    ViewBag.Title = "Manage News Articles";
    Layout = "~/Views/Shared/_Admin.cshtml";
}

@section Javascript {
    <script src="~/js/wysihtml5-0.3.0.min.js"></script>
    <script src="~/js/bootstrap-wysihtml5.js"></script>
    <link href="~/css/bootstrap-wysihtml5.css" rel="stylesheet" />
    <script src="~/js/bootstrap-datepicker.js"></script>
    <link href="~/css/datepicker.css" rel="stylesheet" />
}

<div class="container-fluid">
    <div class="row-fluid">
        <div class="span12">
            <button id="newitem" class="btn btn-primary">New Article</button>
        </div>
    </div>
    <div class="row-fluid">
        <div class="span12">
            <table cellpadding="0" cellspacing="0" border="0" class="datatable table table-striped table-bordered">
                <thead>
                    <tr>
                        <th role="columnheader" class="pri-bg-colour pri-fg-colour">Article Category</th>
                        <th role="columnheader" class="pri-bg-colour pri-fg-colour">Article Title</th>
                        <th role="columnheader" class="pri-bg-colour pri-fg-colour">Valid Dates</th>
                        <th role="columnheader" class="pri-bg-colour pri-fg-colour">Active?</th>
                        <th role="columnheader" class="pri-bg-colour pri-fg-colour">&nbsp;</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Global Deals</td>
                        <td>This Week's Specials</td>
                        <td>01/01/2013 - 31/12/2013</td>
                        <td><i class="icon-check icon-2"></i></td>
                        <td>
                            <button class="btn edititem"><span class="icon-pencil icon-1x"></span>Edit</button>
                            <button class="btn deleteitem"><span class="icon-trash icon-1x"></span>Delete</button>
                        </td>
                    </tr>
                    <tr>
                        <td>Guides and Manuals</td>
                        <td>This Guides</td>
                        <td>01/01/2013 - <span style="font-size: 2em;">&infin;</span></td>
                        <td><i class="icon-check icon-2"></i></td>
                        <td>
                            <button class="btn edititem"><span class="icon-pencil icon-1x"></span>Edit</button>
                            <button class="btn deleteitem"><span class="icon-trash icon-1x"></span>Delete</button>
                        </td>
                    </tr>
                    <tr>
                        <td>Newsletters</td>
                        <td>August 2013</td>
                        <td>01/01/2013 - 31/12/2013</td>
                        <td><i class="icon-check icon-2"></i></td>
                        <td>
                            <button class="btn edititem"><span class="icon-pencil icon-1x"></span>Edit</button>
                            <button class="btn deleteitem"><span class="icon-trash icon-1x"></span>Delete</button>
                        </td>
                    </tr>
                    <tr>
                        <td>Newsletters</td>
                        <td>July 2013</td>
                        <td>01/01/2013 - 31/12/2013</td>
                        <td><i class="icon-check icon-2"></i></td>
                        <td>
                            <button class="btn edititem"><span class="icon-pencil icon-1x"></span>Edit</button>
                            <button class="btn deleteitem"><span class="icon-trash icon-1x"></span>Delete</button>
                        </td>
                    </tr>
                    <tr>
                        <td>Newsletters</td>
                        <td>June 2013</td>
                        <td>01/01/2013 - 31/12/2013</td>
                        <td><i class="icon-check icon-2"></i></td>
                        <td>
                            <button class="btn edititem"><span class="icon-pencil icon-1x"></span>Edit</button>
                            <button class="btn deleteitem"><span class="icon-trash icon-1x"></span>Delete</button>
                        </td>
                    </tr>
                    <tr>
                        <td>Newsletters</td>
                        <td>April 2013</td>
                        <td>01/01/2013 - 31/12/2013</td>
                        <td><i class="icon-check icon-2"></i></td>
                        <td>
                            <button class="btn edititem"><span class="icon-pencil icon-1x"></span>Edit</button>
                            <button class="btn deleteitem"><span class="icon-trash icon-1x"></span>Delete</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<div class="alert-error modal hide fade" id="deletedialog">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="myModalLabel">Are you sure?</h3>
    </div>
    <div class="modal-body">
        Deleting this item cannot be reversed. Are you sure?
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">No</button>
        <button class="btn btn-primary">Yes</button>
    </div>
</div>

<div class="modal hide fade" id="editdialog">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="myModalLabel">Modify this News Article</h3>
    </div>
    <div class="modal-body">
        <form action="#" class="form-horizontal" method="get">

            <div class="row-fluid control-group">
                <div class="span3">
                    <label for="displayname">Category</label>
                </div>
                <div class="span8">
                    <select id="articletype" name="articletype">
                        <option>Newsletters</option>
                        <option>Guides and Manuals</option>
                        <option>Global Deals (Global)</option>
                    </select>
                </div>
            </div>
            <div class="row-fluid control-group">
                <div class="span3">
                    <label for="displayname">Article Title</label>
                </div>
                <div class="span8">
                    <input type="text" class="input-large" id="displayname" name="displayname" />
                </div>
            </div>
            <div class="row-fluid control-group">
                <div class="span3">
                    <label for="displayname">Article Availability</label>
                </div>
                <div class="span8">
                    <input type="text" class="input-small datepicker" id="daterangefrom" name="daterangefrom" placeholder="From" />
                    <input type="text" class="input-small datepicker" id="daterangeto" name="daterangeto" placeholder="To" />
                </div>
            </div>
            <div class="row-fluid control-group">
                <div class="span3">
                    <label for="displayname">Article Is Active?</label>
                </div>
                <div class="span8">
                    <input type="checkbox" class="checkbox" id="active" name="active" />
                </div>
            </div>

            <div class="row-fluid control-group">
                <div class="span3">
                    <label for="unitid">Visibility</label>
                </div>
                <div class="class8">
                    <div class="btn-group btn-toggle-check" data-toggle="buttons-check">
                        <button type="button" class="btn">Public</button>
                        <button type="button" class="btn btn-success active">Private</button>
                    </div>
                </div>
            </div>

            <div class="row-fluid">
                <label class="span3" for="unitid">Attach a File</label>
                <div class="class8">
                    <div class="fileupload fileupload-new" data-provides="fileupload">
                        <span class="btn btn-file" title="Only the following files are allowed - .pdf"><span class="fileupload-new">Select file</span><span class="fileupload-exists">Change</span><input type="file" /></span>
                        <span class="fileupload-preview"></span>
                        <a href="#" class="close fileupload-exists" data-dismiss="fileupload" style="float: none">×</a>
                    </div>
                </div>
            </div>
    
            <div class="row-fluid">
                <div class="span12">
                    <label for="displayname">Article Body</label>
                </div>
            </div>
            <div class="row-fluid control-group">
                <div class="span12">
                    <textarea class="span12 richtext" id="articlebody"></textarea>
                </div>
            </div>

            <div class="row-fluid">
                <div class="span12">
                    <label>Select Sites to Show Article</label>
                </div>
                <div class="span12">
                    <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered">
                        <thead>
                            <tr>
                                <th role="columnheader" class="pri-bg-colour pri-fg-colour">
                                    <input type="checkbox" />
                                </th>
                                <th role="columnheader" class="pri-bg-colour pri-fg-colour">
                                Site Name</td>
                            </tr>
                        </thead>
                        <tbody>
                            @{ int Total = 0;
                               while (Total < 6)
                               {
                                   Total += 1;
                                <tr>
                                    <td>
                                        <input type="checkbox" /></td>
                                    <td>Site Name #@Total</td>
                                </tr>
                               }
                            }
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="row-fluid control-group">
                <div class="span3">
                    <label for="keywords">Article Keywords</label>
                </div>
                <div class="span8">
                    <input type="text" class="input-large" id="keywords" name="keywords" />
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer">
        <input type="reset" value="Clear" class="btn-link" />&nbsp;&nbsp;
            <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
        <button class="btn btn-primary">Save changes</button>
    </div>
</div>

<script>
    $(function () {

        $(".richtext").wysihtml5({
            "font-styles": false, //Font styling, e.g. h1, h2, etc. Default true
            "emphasis": true, //Italics, bold, etc. Default true
            "lists": true, //(Un)ordered lists, e.g. Bullets, Numbers. Default true
            "html": false, //Button which allows you to edit the generated HTML. Default false
            "link": true, //Button to insert a link. Default true
            "color": false //Button to change color of font
        });

        $(".datepicker").datepicker();

        var dataTable = $(".datatable").dataTable({
            "sPaginationType": "full_numbers",
            "bProcessing": true,
            "bServerSide": false,
            "sDom": 'RC<"clear">lfrtip'
        });
        $(".ColVis_Button").addClass("btn").text("Show / Hide Columns").css({ "margin-left": "5px" });

        $("#newitem").click(function () {
            $("#editdialog #displayname").val("");
            $("#editdialog").modal("show");
        });

        $(".edititem").click(function () {
            $("#editdialog #displayname").val("Guides and Manuals");
            $("#editdialog .modal-body").css({ "max-height": "720px" })
            $("#editdialog")
                .css({ "height": "820px" })
                .modal("show");
        });

        $(".deleteitem").click(function () {
            //  show modal to delete tag
            $("#deletedialog").modal("show");
        });

        $(".modal-footer .btn-primary").click(function () {
            toastr.success("Those changes were successfully updated.", "Webtrieve9 Says");
            $(".modal").modal("hide");
        });

        $(".edititem").attr("title", "Click this icon to edit this tag").tooltip();
        $(".deleteitem").attr("title", "Click this icon to delete this tag").tooltip();

        $(".btn-toggle-radio button").click(function () {
            if ($(this).hasClass("active")) {
                $(this).addClass("btn-success");
            } else {
                $(this).removeClass("btn-success");
            };
        });
    });
</script>
